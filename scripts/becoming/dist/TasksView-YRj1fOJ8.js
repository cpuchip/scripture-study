import{d as _,o as h,c as l,a as e,t as r,w as d,v as c,e as T,h as C,b as p,F as V,r as D,i as m,k as v,l as i,n as g}from"./index-DagKDhI8.js";const S={class:"flex items-center justify-between mb-6"},U={key:0,class:"bg-white rounded-lg shadow p-4 mb-6"},M={class:"grid grid-cols-3 gap-3"},$={key:1,class:"text-center py-8 text-gray-400"},j={key:2,class:"text-center py-12 text-gray-500"},B={key:3,class:"bg-white rounded-lg shadow divide-y divide-gray-100"},F={class:"flex items-center gap-3 flex-1 min-w-0"},N=["onClick"],A={key:0,class:"text-xs"},L={class:"min-w-0"},O={class:"font-medium"},q={class:"text-xs text-gray-400 flex gap-2"},z={key:0},E={key:1},P={class:"text-gray-300"},W=["onClick"],I=_({__name:"TasksView",setup(G){const x=m([]),y=m(!0),a=m(!1),o=m({title:"",description:"",source_doc:"",scripture:"",type:"ongoing"});async function u(){y.value=!0,x.value=await v.listTasks(),y.value=!1}async function b(){await v.createTask({title:o.value.title,description:o.value.description,source_doc:o.value.source_doc,scripture:o.value.scripture,type:o.value.type,status:"active"}),o.value={title:"",description:"",source_doc:"",scripture:"",type:"ongoing"},a.value=!1,await u()}async function f(n){const t=n.status==="active"?"completed":"active";await v.updateTask(n.id,{...n,status:t}),await u()}async function w(n){confirm(`Delete "${n.title}"?`)&&(await v.deleteTask(n.id),await u())}return h(u),(n,t)=>(i(),l("div",null,[e("div",S,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold"},"Tasks & Commitments",-1)),e("button",{onClick:t[0]||(t[0]=s=>a.value=!a.value),class:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm"},r(a.value?"Cancel":"+ Add Task"),1)]),a.value?(i(),l("div",U,[e("form",{onSubmit:C(b,["prevent"]),class:"space-y-3"},[e("div",null,[t[7]||(t[7]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Title",-1)),d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.value.title=s),required:"",class:"w-full border rounded px-3 py-2 text-sm",placeholder:"Partake of sacrament with broken heart"},null,512),[[c,o.value.title]])]),e("div",null,[t[8]||(t[8]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),d(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=s=>o.value.description=s),rows:"2",class:"w-full border rounded px-3 py-2 text-sm"},null,512),[[c,o.value.description]])]),e("div",M,[e("div",null,[t[9]||(t[9]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Source Doc",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=s=>o.value.source_doc=s),class:"w-full border rounded px-3 py-2 text-sm",placeholder:"study/truth.md"},null,512),[[c,o.value.source_doc]])]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Scripture",-1)),d(e("input",{"onUpdate:modelValue":t[4]||(t[4]=s=>o.value.scripture=s),class:"w-full border rounded px-3 py-2 text-sm",placeholder:"D&C 93:29"},null,512),[[c,o.value.scripture]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Type",-1)),d(e("select",{"onUpdate:modelValue":t[5]||(t[5]=s=>o.value.type=s),class:"w-full border rounded px-3 py-2 text-sm"},[...t[11]||(t[11]=[e("option",{value:"once"},"Once",-1),e("option",{value:"daily"},"Daily",-1),e("option",{value:"weekly"},"Weekly",-1),e("option",{value:"ongoing"},"Ongoing",-1)])],512),[[T,o.value.type]])])]),t[13]||(t[13]=e("button",{type:"submit",class:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 text-sm"}," Add Task ",-1))],32)])):p("",!0),y.value?(i(),l("div",$,"Loading...")):x.value.length===0?(i(),l("div",j," No tasks yet. ")):(i(),l("div",B,[(i(!0),l(V,null,D(x.value,s=>(i(),l("div",{key:s.id,class:g(["flex items-center justify-between px-4 py-3",{"opacity-50":s.status==="completed"}])},[e("div",F,[e("button",{onClick:k=>f(s),class:g(["w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0",s.status==="completed"?"bg-green-500 border-green-500 text-white":"border-gray-300 hover:border-indigo-400"])},[s.status==="completed"?(i(),l("span",A,"âœ“")):p("",!0)],10,N),e("div",L,[e("div",O,r(s.title),1),e("div",q,[s.scripture?(i(),l("span",z,"ðŸ“– "+r(s.scripture),1)):p("",!0),s.source_doc?(i(),l("span",E,"from "+r(s.source_doc),1)):p("",!0),e("span",P,r(s.type),1)])])]),e("button",{onClick:k=>w(s),class:"text-xs text-red-400 hover:text-red-600 ml-2"},"delete",8,W)],2))),128))]))]))}});export{I as default};
